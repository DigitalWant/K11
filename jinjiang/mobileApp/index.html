<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery Mobile Demos</title>
	<link rel="shortcut icon" href="favicon.ico">
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.css">
	<link rel="stylesheet" href="css/main.css">
	<script src="js/jquery.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>

</head>
<body>




<!-- Start of main page -->
<div data-role="page" id="main">
	<div role="main" class="ui-content">
		<p>I'm first in the source order so I'm shown as the page.</p>
		<p>View internal page called <a href="#intro">Enter</a></p>

	</div><!-- /content -->
</div><!-- /page -->





<!-- Start of intro page -->
<div data-role="page" id="intro">
	<div role="main" class="ui-content" style="height:100%;">
		<ul data-role="listview" style="height:100%;" ><!--
		--><li style="height:25%;"><a href="#hotelInfo1"><img src="http://placehold.it/450x150&amp;text=Level%201" /><img src="http://placehold.it/450x150/ffffff&amp;text=Level%201%20unlocked" /></a></li><!-- 
		--><li style="height:25%;"><a href="#hotelInfo2"><img src="http://placehold.it/450x150&amp;text=Level%202" /><img src="http://placehold.it/450x150/ffffff&amp;text=Level%202%20unlocked" /></a></li><!-- 
		--><li style="height:25%;"><a href="#hotelInfo3"><img src="http://placehold.it/450x150&amp;text=Level%203" /><img src="http://placehold.it/450x150/ffffff&amp;text=Level%203%20unlocked" /></a></li><!-- 
		--><li style="height:25%;"><a href="#hotelInfo4"><img src="http://placehold.it/450x150&amp;text=Level%204" /><img src="http://placehold.it/450x150/ffffff&amp;text=Level%204%20unlocked" /></a></li><!--
		--></ul>
	</div><!-- /content -->
	
</div><!-- /page -->





<!-- Start of hotelInfo  -->
<div data-role="page" id="hotelInfo1" >
	<div role="main" class="ui-content">
		<a href="#dishInfo1"><img src="http://placehold.it/320x480&amp;text=hotelInfo1" /></a>
	</div><!-- /content -->
</div>

<!-- Start of dishInfo  -->
<div data-role="page" id="dishInfo1" >
	<div role="main" class="ui-content">
		<a href="#intro" class="backToIntro"><img src="http://placehold.it/320x480&amp;text=dishInfo1" /></a>		
	</div><!-- /content -->
</div>






<!-- Start of hotelInfo  -->
<div data-role="page" id="hotelInfo2" >
	<div role="main" class="ui-content">
		<a href="#dishInfo2"><img src="http://placehold.it/320x480&amp;text=hotelInfo2" /></a>
	</div><!-- /content -->
</div>

<!-- Start of dishInfo  -->
<div data-role="page" id="dishInfo2" >

	<div role="main" class="ui-content">
		<a href="#intro" class="backToIntro" ><img src="http://placehold.it/320x480&amp;text=dishInfo2" /></a>
	</div><!-- /content -->
</div>








<!-- Start of hotelInfo  -->
<div data-role="page" id="hotelInfo3" >
	<div role="main" class="ui-content">
		<a href="#dishInfo3"><img src="http://placehold.it/320x480&amp;text=hotelInfo3" /></a>
	</div><!-- /content -->
</div>

<!-- Start of dishInfo  -->
<div data-role="page" id="dishInfo3" >
	<div role="main" class="ui-content">
		<a href="#intro" class="backToIntro"><img src="http://placehold.it/320x480&amp;text=dishInfo3" /></a>
	</div><!-- /content -->
</div>






<!-- Start of hotelInfo  -->
<div data-role="page" id="hotelInfo4" >
	<div role="main" class="ui-content">
		<a href="#dishInfo4"><img src="http://placehold.it/320x480&amp;text=hotelInfo4" /></a>
	</div><!-- /content -->
</div>

<!-- Start of dishInfo  -->
<div data-role="page" id="dishInfo4" >
	<div role="main" class="ui-content">
		<a href="#popup" data-rel="dialog" data-transition="pop"><img src="http://placehold.it/320x680&amp;text=done" /></a>
	</div><!-- /content -->
</div>



<a href="#rule" id="ruleTip" class="ui-panel-animate" >游戏规则</a>

<!-- leftpanel3  -->
<div data-role="panel" id="rule" data-position="left" data-display="overlay" data-position-fixed="true">
	 <h3>Left Panel: Overlay</h3>
    <p>This panel is positioned on the left with the overlay display mode. The panel markup is <em>after</em> the header, content and footer in the source order.</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
    <p>To close, click off the panel, swipe left or right, hit the Esc key, or use the button below:</p>
</div><!-- /leftpanel3 -->



<!-- Start of pop page: #popup -->
<div data-role="page" id="popup">

	<div data-role="header">
		<h1>Dialog</h1>
	</div><!-- /header -->
	<div role="main" class="ui-content">
		<h2>Popup</h2>
		<p>I have an id of "popup" on my page container and only look like a dialog because the link to me had a <code>data-rel="dialog"</code> attribute which gives me this inset look and a <code>data-transition="pop"</code> attribute to change the transition to pop. Without this, I'd be styled as a normal page.</p>
		<p><a href="#intro" class="backToIntro ui-btn ui-shadow ui-corner-all ui-btn-inline ui-icon-back ui-btn-icon-left">Back to page "one"</a></p>
	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->


<script type="text/javascript" >
		//$(function() {

			//rule tips 
			var steps = [false,false,false,false];
			var $rulePanel = $( "body>[data-role='panel']" ).panel();
			var $ruleTips = $("#ruleTip");
			var $listKey = $("#intro [data-role=listview] A");
			var $backToIntro = $(".backToIntro");
			
			steps[0]=true;

			// Bind an event to window.orientationchange that, when the device is turned,
			// gets the orientation and displays it to on screen.
			$( window ).on( "orientationchange", function( event ) {
				console.log("This device is in " + event.orientation + " mode!" );
			  //$( "#popup" ).text( "This device is in " + event.orientation + " mode!" );
			});
			 
			// You can also manually force this event to fire.
			$( window ).orientationchange();

			$rulePanel.on('panelbeforeopen',function(){
				$ruleTips.addClass('open');
			})
			$rulePanel.on('panelbeforeclose',function(){
				$ruleTips.removeClass('open');
			})

			// When entering intro
			$(document).on("pagebeforeshow","#intro",function(){ 
				for( i in steps){
					if (steps[i] == true){
						$listKey.eq(i).addClass('unlocked');
					}
				}
			});

			//Reach the step end, mark on global
			$backToIntro.on('click',function(){
				var nextIndex = $backToIntro.index($(this))+1;
				steps[nextIndex] = true;
			});

			//key list

			$listKey.on('click',function(e){
				if (!$(this).hasClass('unlocked')){
					e.preventDefault();
				}
			})

		//});


/*	
$.widget( "custom.progressbar", {
    options: {
        value: 0
    },
    _create: function() {
    	console.log('0');
        this.options.value = this._constrain(this.options.value);
        this.element.addClass( "progressbar" );
        this.refresh();
    },
    _setOption: function( key, value ) {
    	console.log('1');
        if ( key === "value" ) {
            value = this._constrain( value );
        }
        this._super( key, value );
    },
    _setOptions: function( options ) {
    	console.log('2');
        this._super( options );
        this.refresh();
    },
    refresh: function() {
    	console.log('3');
        var progress = this.options.value + "%";
        this.element.text( progress );
        if ( this.options.value == 100 ) {
            this._trigger( "complete", null, { value: 100 } );
        }
    },
    _constrain: function( value ) {
    	console.log('4');

        if ( value > 100 ) {
            value = 100;
        }
        if ( value < 0 ) {
            value = 0;
        }
        return value;
    }
});


var bar = $( "<div></div>" )
    .appendTo( "body" )
    .progressbar();


	bar.progressbar('option','value',330);
*/
</script>
</body>
</html>